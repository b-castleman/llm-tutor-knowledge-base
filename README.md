# Examining the Influence of Varied Levels of Domain Knowledge Base Inclusion in GPT-based Intelligent Tutors

## Conference Paper
The following is a repository for the code and data from Castleman and Turkcan (2024). The paper URL will be included below once it becomes available.

## Setup
1. Install Docker and ensure it is running (required for Haystack's containers)

- https://docs.docker.com/engine/install/

2. Install all required Python packages
```
pip install openai # openai gpt-4 api access
pip install 'farm-haystack[all]' # haystack and all of its dependencies; this will take a few minutes
```

## Tutor Code
The code for the intelligent tutors is located in the directory `'./Tutor Architecture'`. The files found here are as listed:

- `Tutor.py`: The code for the intelligent tutor as described in Castleman and Turkcan (2024)
- `runme.py`: An example of how tutors can be instantiated and ran for the three different intelligent tutors of varying knowledge base access levels
- `SupervisorFiles`: A directory of files that make up the knowledge base. The educational supervisor may alter these if wished
  - `topicsList.json`: A list of all topics wished to be taught within this lesson subject. In Castleman and Turkcan (2024), we did not split our information into different topics. However, the functionality has been made available for users. This file is required nonetheless as an encoding for the name of the topic to the rest of its information
  - `topicsInformationList.json`: A list of descriptions for all topics wished to be taught for the lesson subject. This is essentially the partial knowledgebase access option and this alters the information presented to GPT.
  - `lectureMaterial.json`: A list of all topics' subtopics. This is essentially the full knowledgebase access option and this alters the information presented to GPT. As many subtopics as one wishes to use is available.
  - `generatedKeywords.json`: The keywords generated by GPT for the `lectureMaterial.json` subtopics. Though this is automatically created by GPT, we leave it in the SupervisorFiles directory as the supervisor may want to add, edit, or remove certain keywords. By default, the supervisor should leave this file alone.
  - `lineToInformation.json`: The Haystack encodings generated to map the `processedLectureMaterial.txt` file (later detailed) to the lecture material (for post-search concatenation). Though this is automatically created, we leave it in the SupervisorFiles directory as the supervisor may want to add, edit, or remove the information presented to the user if Haystack chooses for it to be used. By default, the supervisor should leave this file alone.
- `HaystackSearch`: A directory of files processed for Haystack with essentially no resourcefulness to supervisors.
  - `processedLectureMaterial.txt`: The Haystack file to for searching, which is the interwoven `lectureMaterial.json` and `generatedKeywords.json` files. This file shouldn't be edited. Any information required for change in this file should rather be changed in the aforementioned `lectureMaterial.json` or `generatedKeywords.json` files.


## Resultant Data and Figures
The resultant data from Stages #2 and #3, along with some figures presented in Castleman and Turkcan (2024), are located in `'./Data and Figure Creation'`. The files this directory contains are as follows:

- `results.json`: All data (i.e. questions, answers, assessments, evaluations) for all stages of the evaluation pipeline. Please visit the `README` section of the JSON file for a description of each variable and its meaning.
- `dataParsing.m`: The code for parsing the `results.json` file. It outputs `parsedData.mat`, which is the processed version of this data.
- `parsedData.mat`: As previously described, it is the processed data from the `results.json` file. It contains the counts of all reply choices for each pedagogical category in each intelligent tutor.
- `figure1.pdf`: Figure 1 from Castleman and Turkcan (2024). This figure was created manually in drawio and does not have any source code.
- `table1Creation.m`: This file creates Table 1 from Castleman and Turkcan (2024). It also saves the table as `table1.csv`.
- `table1.csv`: Table 1 from Castleman and Turkcan (2024), as aforementioned.
- `figure3Creation.m`: This file creates Figure 3 from Castleman and Turkcan (2024). It also saves the figure as `figure3.pdf`.
- `figure3.pdf`: Figure 3 from Castleman and Turkcan (2024), as aforementioned.



## Questions, Comments, or Concerns
Feel free to contact the lead author at bc3029@columbia.edu if you have any questions, comments, or concerns about anything in this repository. 
